<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Estilo Prisma - Catálogo</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>Estilo Prisma</h1>
    <p>Tu estilo, tu esencia. Ropa con alma rockera.</p>
  </header>

  <nav id="categorias" class="categorias">
    <!-- Los botones de categorías se insertan aquí automáticamente -->
  </nav>

  <main class="catalogo" id="catalogo">
    <!-- Los productos se insertan aquí automáticamente -->
  </main>

  <footer>
    <p>© 2025 Estilo Prisma. Todos los derechos reservados.</p>
  </footer>

  <!-- Librería PapaParse para leer el CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

  <script>
    let todosLosProductos = [];

    async function cargarProductos() {
      try {
        const respuesta = await fetch('chips.csv');
        const texto = await respuesta.text();

        Papa.parse(texto, {
          header: true,
          skipEmptyLines: true,
          complete: function(resultados) {
            todosLosProductos = resultados.data;
            generarCategorias(todosLosProductos);
            mostrarProductos(todosLosProductos);
          }
        });
      } catch (error) {
        console.error('Error cargando productos:', error);
      }
    }

    function generarCategorias(productos) {
      const categoriasNav = document.getElementById('categorias');
      const categoriasUnicas = [...new Set(productos.map(p => p.Categoría.trim()))];

      // Botón para mostrar todos
      const btnTodos = document.createElement('button');
      btnTodos.textContent = 'Todos';
      btnTodos.className = 'categoria-boton';
      btnTodos.onclick = () => mostrarProductos(todosLosProductos);
      categoriasNav.appendChild(btnTodos);

      // Botones de cada categoría
      categoriasUnicas.forEach(cat => {
        const boton = document.createElement('button');
        boton.textContent = cat;
        boton.className = 'categoria-boton';
        boton.onclick = () => {
          const filtrados = todosLosProductos.filter(p => p.Categoría.trim() === cat);
          mostrarProductos(filtrados);
        };
        categoriasNav.appendChild(boton);
      });
    }

    function mostrarProductos(productos) {
      const catalogo = document.getElementById('catalogo');
      catalogo.innerHTML = '';

      productos.forEach(producto => {
        if (producto.Enlace && producto.Categoría && producto.Precio) {
          const div = document.createElement('div');
          div.className = 'producto';
          div.innerHTML = `
            <img src="${producto.Enlace.trim()}" alt="${producto.Imagen}" loading="lazy">
            <h2>${producto.Imagen}</h2>
            <p class="precio">$${Number(producto.Precio).toLocaleString('es-CO')}</p>
            <p class="descripcion">
              Talla: ${producto.Talla || '-'}<br>
              Colores: ${producto.Color || '-'}
            </p>
          `;
          catalogo.appendChild(div);
        }
      });
    }

    cargarProductos();
  </script>

</body>
</html>
